<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- inter font -->
		   <!-- Link to preconnect and stylesheet for Inter font -->
		   <link rel="preconnect" href="https://rsms.me/">
		   <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
		   <!-- CSS to apply Inter font -->
		   <style>
			   /* CSS */
			   :root {
				   font-family: Inter, sans-serif;
				   font-feature-settings: 'liga' 1, 'calt' 1; /* fix for Chrome */
			   }
			   @supports (font-variation-settings: normal) {
				   :root { font-family: InterVariable, sans-serif; }
			   }
		   </style>

		<title>A liquid on the 3-sphere</title>
		<style>
			body {
				margin: 0;
			}
			#container {
				width: 100%;
				height: 100%;
				position: relative;
			}
			#textOverlay {
				/* display: none; /* Initially hidden */
				position: absolute;
				top: 20px;
				left: 20px;
				color: white;
				font-size: 20px;
			}
			#subtitle {
				/* display: none; /* Initially hidden */
				position: absolute;
				top: 60px;
				left: 20px;
				color: white;
				font-size: 20px;
			}
		</style>

    <script type="importmap">
        {
        "imports": {
            "three": "https://unpkg.com/three@0.162.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.162.0/examples/jsm/"
        }
        }
  </script>
	</head>
	<body>
		<div id="container"></div>
		<div id="textOverlay" class="conten"t> <h2> Hyper-hemisphere w>0 </h2> </div>
		<div id="subtitle" class="content"><h3> Press [SPACE] to switch hemisphere </h3> </div>
		<script>
  let globalFileContent = ''; // Define a global variable

// Function to load the text file using Fetch API
async function loadTextFile(url) {
	try {
		const response = await fetch(url);
		if (!response.ok) {
			throw new Error(`HTTP error! status: ${response.status}`);
		}
		globalFileContent = await response.text();
		console.log('File content loaded:', globalFileContent);
		// Call the function or perform the actions that depend on globalFileContent here
		loadMainScript(); // Load main.js after file loading
	} catch (error) {
		console.error('Error loading file:', error);
	}
}

// Load main.js dynamically
function loadMainScript() {
	const script = document.createElement('script');
	script.src = '/main.js';
	script.type = 'module';
	document.body.appendChild(script);
}

// Load the text file when the page is loaded
window.onload = function() {
	loadTextFile('output.tj');
};
	/*
			// Function to load the text file using AJAX
			function loadTextFile(url, callback) {
				const xhr = new XMLHttpRequest();
				xhr.onreadystatechange = function() {
					if (xhr.readyState === 4 && xhr.status === 200) {
						callback(xhr.responseText);
					}
				};
				xhr.open('GET', url, true);
				xhr.send();
			}
	
			// Load the text file when the page is loaded
			// window.onload = function() {
				loadTextFile('output.tj', function(fileContent) {
					// Display the content
					// document.getElementById('output').textContent = fileContent;
	
					// Access the file content within this scope
					// console.log('File content:', fileContent);
					globalFileContent = fileContent;
				});
			// };
			*/
		</script>

		<!-- <script type="module" src="/main.js" async></script> -->
	</body>
</html>
